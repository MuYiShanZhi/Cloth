<!DOCTYPE html>
<html lang="en">
<head>
    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
        <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="format-detection" content="telephone=no" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta content="black" name="apple-mobile-web-app-status-bar-style">
        <link href="css/bksystem.css" rel="stylesheet" type="text/css" />
        <link href="skin/black/skin.css" rel="stylesheet" type="text/css" id="skin" />
        <link href="css/module.css" rel="stylesheet" type="text/css" />
        <link href="font/iconfont.css" rel="stylesheet" type="text/css" />
        <title>登录</title>
        <script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
        <script src="js/jquery.cookie.js" type="text/javascript"></script>
        <script src="js/jquery.nicescroll.js" type="text/javascript"></script>
        <script src="js/BKframe.js" type="text/javascript"></script>
        <!--[if lt IE 9]>
        <script src="js/html5shiv.js" type="text/javascript"></script>
        <script src="js/css3-mediaqueries.js" type="text/javascript"></script>
        <![endif]-->
    </head>
</head>
<!--<body class="login-layout Reg_log_style" id="loginstyle">-->
<!--<div class="logintop">-->
    <!--<span>后台管理界面平台</span>-->
    <!--<ul>-->
        <!--<li>-->
            <!--<a href="#">返回首页</a>-->
        <!--</li>-->
        <!--<li>-->
            <!--<a href="#">帮助</a>-->
        <!--</li>-->
        <!--<li>-->
            <!--<a href="#">关于</a>-->
        <!--</li>-->
    <!--</ul>-->
<!--</div>-->
<!--<div class="loginbody">-->
    <!--<div class="login-container">-->
        <!--<div class="center"> <img src="images/logo.png" /></div>-->
        <!--<div class="space-6"></div>-->
        <!--<div class="position-relative">-->
            <!--<div id="login-box" class="login-box widget-box no-border visible">-->
                <!--<div class="login-main">-->
                    <!--&lt;!&ndash;皮肤选择&ndash;&gt;-->
                    <!--<div class="skin-section">-->
                        <!--<a href="javascript:void(0)" class="skin-btn clickBombbox iconfont icon-pifushezhi" id="skin-btn"></a>-->
                        <!--<div class="Bombbox">-->
                            <!--<ul class="skin-list">-->
                                <!--<li>-->
                                    <!--<a class="colorpick-btn" href="javascript:void(0)" data-val="black" id="default" style="background-color:#222A2D"></a>-->
                                <!--</li>-->
                                <!--<li>-->
                                    <!--<a class="colorpick-btn" href="javascript:void(0)" data-val="blue" style="background-color:#438EB9;"></a>-->
                                <!--</li>-->
                                <!--<li>-->
                                    <!--<a class="colorpick-btn" href="javascript:void(0)" data-val="green" style="background-color:#72B63F;"></a>-->
                                <!--</li>-->
                                <!--<li>-->
                                    <!--<a class="colorpick-btn" href="javascript:void(0)" data-val="gray" style="background-color:#067350;"></a>-->
                                <!--</li>-->
                                <!--<li>-->
                                    <!--<a class="colorpick-btn" href="javascript:void(0)" data-val="red" style="background-color:#FF6868;"></a>-->
                                <!--</li>-->
                                <!--<li>-->
                                    <!--<a class="colorpick-btn" href="javascript:void(0)" data-val="purple" style="background-color:#6F036B;"></a>-->
                                <!--</li>-->
                            <!--</ul>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="clearfix">-->
                        <!--<div class="login_icon"><img src="images/login_img.png" /></div>-->
                        <!--<form class="" style=" width:300px; float:right; margin-right:50px;">-->
                            <!--<h4 class="title_name"><img src="images/login_title.png" /></h4>-->
                            <!--<fieldset>-->
                                <!--<ul>-->
                                    <!--<li class="frame_style form_error"><label class="user_icon iconfont">&#xe620;</label><input type="text" id="userId" name="userId" data-name="用户名" placeholder="用户名" />&lt;!&ndash; 用户名 &ndash;&gt;<i>用户名</i></li>-->
                                    <!--<li class="frame_style form_error"><label class="password_icon iconfont">&#xe625;</label><input type="password"  id="userPassword" name="userPassword"data-name="密码" /><i>密码</i></li>-->
                                    <!--<li class="frame_style form_error"><label class="Codes_icon iconfont">&#xe624;</label><input type="text" placeholder="输入验证码" name="ValiImage"data-name="验证码"/><i>验证码</i>-->
                                        <!--<div class="Codes_region"><img src="/checkCodeServlet" onclick="changeValiImage(this)" width="100%" height="38px"/></div>-->
                                    <!--</li>-->
                                <!--</ul>-->
                                <!--<div class="space"></div>-->
                                <!--<div class="clearfix">-->
                                    <!--<label class="inline">-->
                                        <!--<input type="checkbox" class="ace">-->
                                        <!--<span class="lbl">保存密码</span>-->
                                    <!--</label>-->
                                    <!--<button type="button" class="login_btn" id="login_btn" onclick="doLogin()"> 登&nbsp;录 </button>-->
                                <!--</div>-->

                                <!--<div class="space-4"></div>-->
                            <!--</fieldset>-->
                        <!--</form>-->
                    <!--</div>-->
                    <!--<div class="social-or-login center">-->
                        <!--<span class="bigger-110">通知</span>-->
                    <!--</div>-->
                    <!--<div class="social-login ">-->
                        <!--为了更好的体验性（兼容移动端），本网站系统不再对IE8（含IE8）以下浏览器支持，请见谅。-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
<!--</div>-->
<!--<div class="loginbm">版权所有 2016</div>-->
<!--</body>-->
</html>
<script type="text/javascript">
    function changeValiImage(img){
        img.src = "/checkCodeServlet?time=" + new Date().getTime();
    }
    // function doLogin() {
    //     window.location.href="/login/dologin"
    // }
    function doLogin(){

        //展示一个加载中
        // g_showLoading();
        // var userCode='<%=session.getAttribute("Valicode")}%>';
        // if(userCode==$("ValiImage")){
        //     $.ajax({
        //         url: "/login/do_login",
        //         type: "POST",
        //         data:{
        //             userId:$("#userId").val(),
        //             userPassword: $("#password").val()
        //         },
        //         success:function(data){
        //             layer.closeAll();
        //             console.log(data);
        //             if(data.code == 0){		//服务端Result类中定义的code
        //                 layer.msg("成功");	//会在屏幕上弹出一个短暂的提示信息，并自动消失
        //                 window.location.href="/success";	//登录成功后的跳转在这里实现
        //             }else{
        //                 layer.msg(data.msg);	//服务端Result类中定义的msg
        //             }
        //         },
        //         error:function(){
        //             layer.closeAll();
        //         }
        //     });
        // }
        // else {
        //     window.location.href="/error"
        // }

        $.ajax({
            url: "/login/do_login",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data:{
                userId:$("#userId"),
                userPassword: $("#userPassword")

            },
            success:function(data){
                layer.closeAll();
                console.log(data);
                if(data.code == 0){		//服务端Result类中定义的code
                    layer.msg("成功");	//会在屏幕上弹出一个短暂的提示信息，并自动消失
                    window.location.href="/success";	//登录成功后的跳转在这里实现
                }else{
                    layer.msg(data.msg);	//服务端Result类中定义的msg
                }
            },
            error:function(){
                layer.closeAll();
            }
        })
        // var inputPass = $("#password").val();	<!-- 用户输入的明文密码 -->
        // var salt = g_passsword_salt;
        // var str = ""+salt.charAt(0)+salt.charAt(2) + inputPass +salt.charAt(5) + salt.charAt(4);
        // var password = md5(str);	<!-- 第一次加密后的密码 -->

    }
    //框架设置
    $(function() {
        $("#loginstyle").BKframe({
            //必须保留否则无法进行皮肤更换，以及兼容移动端

        })
    });
</script>
<body>
<form method="post" action="/login/do_login">
    <p>用户名:</p>
    <input type="text" id="userId" name="userId" placeholder="用户名" /><!-- 用户名 -->
    <p>密码:</p>
    <input type="password"  id="userPassword" name="userPassword"/><!-- 密码 -->
    <p>验证码:</p>
    <img src="/checkCodeServlet" onclick="changeValiImage(this)" /><!-- 验证码图片 -->
    <input type="text" placeholder="输入验证码" name="ValiImage" /><!-- 输入验证码文本 -->
    <button onclick="doLogin()" >登录</button>
</form>
<!-- 验证码图片点击切换 -->
<!-- 通过Date来改变每次访问的url不同 -->
<script type="text/javascript">
    function changeValiImage(img){
        img.src = "/checkCodeServlet?time=" + new Date().getTime();
    }
    // function doLogin() {
    //     window.location.href="/login/dologin"
    // }
    function doLogin(){

        //展示一个加载中
        // g_showLoading();
        // var userCode='<%=session.getAttribute("Valicode")}%>';
        // if(userCode==$("ValiImage")){
        //     $.ajax({
        //         url: "/login/do_login",
        //         type: "POST",
        //         data:{
        //             userId:$("#userId").val(),
        //             userPassword: $("#password").val()
        //         },
        //         success:function(data){
        //             layer.closeAll();
        //             console.log(data);
        //             if(data.code == 0){		//服务端Result类中定义的code
        //                 layer.msg("成功");	//会在屏幕上弹出一个短暂的提示信息，并自动消失
        //                 window.location.href="/success";	//登录成功后的跳转在这里实现
        //             }else{
        //                 layer.msg(data.msg);	//服务端Result类中定义的msg
        //             }
        //         },
        //         error:function(){
        //             layer.closeAll();
        //         }
        //     });
        // }
        // else {
        //     window.location.href="/error"
        // }

        $.ajax({
            url: "/login/do_login",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data:{
                userId:$("#userId"),
                userPassword: $("#userPassword")

            },
            success:function(data){
                layer.closeAll();
                console.log(data);
                if(data.code == 0){		//服务端Result类中定义的code
                    layer.msg("成功");	//会在屏幕上弹出一个短暂的提示信息，并自动消失
                    window.location.href="/success";	//登录成功后的跳转在这里实现
                }else{
                    layer.msg(data.msg);	//服务端Result类中定义的msg
                }
            },
            error:function(){
                layer.closeAll();
            }
        })
        // var inputPass = $("#password").val();	<!-- 用户输入的明文密码 -->
        // var salt = g_passsword_salt;
        // var str = ""+salt.charAt(0)+salt.charAt(2) + inputPass +salt.charAt(5) + salt.charAt(4);
        // var password = md5(str);	<!-- 第一次加密后的密码 -->

    }
</script>

</body>
</html>